<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>xatomic: F:/Packages/xatomic/source/main/include/xatomic/x_mbuf.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">xatomic
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">F:/Packages/xatomic/source/main/include/xatomic/x_mbuf.h</div>  </div>
</div>
<div class="contents">
<a href="x__mbuf_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef __XMULTICORE_MBUF_H__</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define __XMULTICORE_MBUF_H__</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="preprocessor">#include &quot;xbase\x_target.h&quot;</span>
<a name="l00004"></a>00004 <span class="preprocessor">#ifdef USE_PRAGMA_ONCE </span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">#pragma once </span>
<a name="l00006"></a>00006 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &quot;xbase\x_types.h&quot;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;xbase\x_debug.h&quot;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;xbase\x_memory_std.h&quot;</span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="x__dlist_8h.html">xatomic\private\x_dlist.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="x__atomic_8h.html">xatomic\x_atomic.h</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="x__compiler_8h.html">xatomic\private\x_compiler.h</a>&quot;</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="keyword">namespace </span>xcore
<a name="l00017"></a>00017 {
<a name="l00018"></a>00018         <span class="keyword">class </span>x_iallocator;
<a name="l00019"></a>00019 
<a name="l00020"></a>00020         <span class="keyword">namespace </span>atomic
<a name="l00021"></a>00021         {
<a name="l00022"></a>00022                 <span class="keyword">namespace </span>mbuf
<a name="l00023"></a>00023                 {
<a name="l00024"></a>00024                         <span class="keyword">class </span>head;
<a name="l00025"></a>00025 
<a name="l00031"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html">00031</a>                         <span class="keyword">class </span><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html">allocator</a>
<a name="l00032"></a>00032                         {
<a name="l00033"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#abdcb7d73855d47ff880d6e537210abf0">00033</a>                                 x_iallocator*   <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#abdcb7d73855d47ff880d6e537210abf0">_allocator</a>;
<a name="l00034"></a>00034                         <span class="keyword">public</span>:
<a name="l00035"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a5a896aa6fb357b07cd2154c8311f63e1">00035</a>                                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a5a896aa6fb357b07cd2154c8311f63e1">allocator</a>(x_iallocator* <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html">allocator</a>) : <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#abdcb7d73855d47ff880d6e537210abf0">_allocator</a>(allocator)              { }
<a name="l00036"></a>00036 
<a name="l00037"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#acdbeef59a558e873fa5cf5d3ac16fb19">00037</a>                                 <span class="keyword">virtual</span>                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#acdbeef59a558e873fa5cf5d3ac16fb19">~allocator</a>()                                                                    { }
<a name="l00038"></a>00038 
<a name="l00044"></a>00044                                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a>*                   <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#afeda4ae0975c9947aaf3cb5d93352cc9">alloc</a>(u32 size = 128);
<a name="l00045"></a>00045 
<a name="l00051"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a841df53c59ff9662f76c71952e8aa2b6">00051</a>                                 <span class="keyword">inline</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a>*    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a841df53c59ff9662f76c71952e8aa2b6">allocate_head</a>()                                                                 { <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a8ad0500716bf1bf1dccec1bdec57ce25">alloc_head</a>(); }
<a name="l00052"></a>00052 
<a name="l00057"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a73103074b941e63c2b64f89c423dabce">00057</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a73103074b941e63c2b64f89c423dabce">deallocate_head</a>(<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *m)                                                { <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a066659449d0d4300206f58f9840715e8">free_head</a>(m); }
<a name="l00058"></a>00058 
<a name="l00066"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#afa4b54ff8dadd2c9b5cb31fc70ae2baa">00066</a>                                 <span class="keywordtype">bool</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#afa4b54ff8dadd2c9b5cb31fc70ae2baa">allocate_data</a>(<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *m, u32 size)                                { <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a74c0fcb1a5f6c20f12babdcfd2c58042">alloc_data</a>(m, size); }
<a name="l00067"></a>00067 
<a name="l00073"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a13fc50ef4e4ddcaf091bcfa2e80373b4">00073</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a13fc50ef4e4ddcaf091bcfa2e80373b4">deallocate_data</a>(<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *m)                                                { <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a509b69a7a0c58d7ec61c3898241fcfca">free_data</a>(m); }
<a name="l00074"></a>00074                         
<a name="l00075"></a>00075                         <span class="keyword">protected</span>:
<a name="l00076"></a>00076                                 <span class="keyword">virtual</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a>*   <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a8ad0500716bf1bf1dccec1bdec57ce25">alloc_head</a>();
<a name="l00077"></a>00077                                 <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a066659449d0d4300206f58f9840715e8">free_head</a>(<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *m);
<a name="l00078"></a>00078                                 <span class="keyword">virtual</span> <span class="keywordtype">bool</span>    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a74c0fcb1a5f6c20f12babdcfd2c58042">alloc_data</a>(<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *m, u32 size);
<a name="l00079"></a>00079                                 <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a509b69a7a0c58d7ec61c3898241fcfca">free_data</a>(<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *m);
<a name="l00080"></a>00080 
<a name="l00081"></a>00081                         };
<a name="l00082"></a>00082 
<a name="l00088"></a><a class="code" href="namespacexcore_1_1atomic_1_1mbuf.html#af0fc3b35eae5f3727148580844207c77">00088</a>                         <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *<a class="code" href="namespacexcore_1_1atomic_1_1mbuf.html#af0fc3b35eae5f3727148580844207c77">allocate</a>(<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html">allocator</a> *al)
<a name="l00089"></a>00089                         {
<a name="l00090"></a>00090                                 <span class="keywordflow">return</span> al-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#afeda4ae0975c9947aaf3cb5d93352cc9">alloc</a>();
<a name="l00091"></a>00091                         }
<a name="l00092"></a>00092 
<a name="l00099"></a><a class="code" href="namespacexcore_1_1atomic_1_1mbuf.html#a12bf46a4ecb0c1fd56c1fece45fada3b">00099</a>                         <span class="keyword">static</span> <span class="keyword">inline</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *<a class="code" href="namespacexcore_1_1atomic_1_1mbuf.html#af0fc3b35eae5f3727148580844207c77">allocate</a>(u32 size, <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html">allocator</a> *al)
<a name="l00100"></a>00100                         {
<a name="l00101"></a>00101                                 <span class="keywordflow">return</span> al-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#afeda4ae0975c9947aaf3cb5d93352cc9">alloc</a>(size);
<a name="l00102"></a>00102                         }
<a name="l00103"></a>00103 
<a name="l00107"></a><a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html">00107</a>                         <span class="keyword">struct </span><a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html">shared</a> 
<a name="l00108"></a>00108                         {
<a name="l00109"></a><a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a0f1af74718fa836b2e2f4e96bd80aa97">00109</a>                                 u64                             <a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a0f1af74718fa836b2e2f4e96bd80aa97" title="Timestamp.">timestamp</a>;                                      
<a name="l00110"></a><a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a5eb70b34a8c4ed13091f10e0b08eca39">00110</a>                                 u32                             <a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a5eb70b34a8c4ed13091f10e0b08eca39" title="Context. Owned by exclusive head owner.">context</a>;                                        
<a name="l00111"></a><a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a31a729b09301ebf3221137e87c09455d">00111</a>                                 <a class="code" href="classxcore_1_1atomic_1_1atom__s32.html">atom_s32</a>                <a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a31a729b09301ebf3221137e87c09455d" title="Data refcount. Used for cloning.">refcnt</a>;                                         
<a name="l00112"></a>00112 
<a name="l00116"></a><a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a8f0ce48381a9e9dc3db852e6be1e20d0">00116</a>                                 <span class="keywordtype">void</span>*           <a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a8f0ce48381a9e9dc3db852e6be1e20d0">operator new</a>(xcore::xsize_t num_bytes, <span class="keywordtype">void</span>* mem)                       { <span class="keywordflow">return</span> mem; }
<a name="l00117"></a><a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#ad3e758d28f86db36e6a14084961a92ff">00117</a>                                 <span class="keywordtype">void</span>            <a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#ad3e758d28f86db36e6a14084961a92ff">operator delete</a>(<span class="keywordtype">void</span>* mem, <span class="keywordtype">void</span>* )                                                      { }
<a name="l00118"></a>00118 
<a name="l00119"></a>00119                         };
<a name="l00120"></a>00120 
<a name="l00126"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">00126</a>                         <span class="keyword">class </span><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> : <span class="keyword">public</span> dlist::<a class="code" href="structnode.html">node</a>
<a name="l00127"></a>00127                         {
<a name="l00128"></a>00128                         <span class="keyword">protected</span>:
<a name="l00129"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a56d49a44a182e9aae35f86c4a1f8f4e6">00129</a>                                 <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html">allocator</a>;
<a name="l00130"></a>00130 
<a name="l00131"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a28382e32c10d3899d143c79249937986">00131</a>                                 u8*                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a28382e32c10d3899d143c79249937986" title="Pointer to the memory buffer.">_buf</a>;                                   
<a name="l00132"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996">00132</a>                                 <a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html">shared</a>*                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996" title="Pointer to the shared area.">_shared</a>;                                
<a name="l00133"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae00a7f0365b447eb90864f070e7d264a">00133</a>                                 <a class="code" href="classxcore_1_1atomic_1_1atom__s32.html">atom_s32</a>                <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae00a7f0365b447eb90864f070e7d264a" title="The number of references to this object.">_refcnt</a>;                                
<a name="l00134"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3e07ac778022642c1b89f07c924553c0">00134</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3e07ac778022642c1b89f07c924553c0" title="Size of the buffer.">_size</a>;                                  
<a name="l00135"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa0754ec72b169bc56ca0266159883a65">00135</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa0754ec72b169bc56ca0266159883a65" title="Data offset.">_data</a>;                                  
<a name="l00136"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78">00136</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a>;                                   
<a name="l00137"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a6b0f3f9f5c86077db5122d205fe0c583">00137</a>                                 u16                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a6b0f3f9f5c86077db5122d205fe0c583" title="Misc flags.">_flags</a>;                                 
<a name="l00138"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a08e51a375ba5d102ce34b9dff35b0e40">00138</a>                                 u16                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a08e51a375ba5d102ce34b9dff35b0e40" title="A tag. Used for tracking purposes.">_tag</a>;                                   
<a name="l00139"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a14c8d7afe182a4707686ba670367db1a">00139</a>                                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html">allocator</a>*              <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a14c8d7afe182a4707686ba670367db1a" title="Allocator used in creating this object and to be used when cloning and copying this object...">_allocator</a>;                             
<a name="l00140"></a>00140 
<a name="l00145"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ac5259606c04a6058aab0518f88b8b558">00145</a>                                                                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ac5259606c04a6058aab0518f88b8b558">head</a>()                                                                                  { }
<a name="l00146"></a>00146 
<a name="l00151"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a4f88329f9d5730c5863fe4495d1a3b7d">00151</a>                                                                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a4f88329f9d5730c5863fe4495d1a3b7d">~head</a>()                                                                                 { }
<a name="l00152"></a>00152 
<a name="l00153"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae796c9d672741c066aa76ab41e98d6d2">00153</a>                                 u8*                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae796c9d672741c066aa76ab41e98d6d2">end</a>()                                                                                   { <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a28382e32c10d3899d143c79249937986" title="Pointer to the memory buffer.">_buf</a> + <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3e07ac778022642c1b89f07c924553c0" title="Size of the buffer.">_size</a>; }
<a name="l00154"></a>00154 
<a name="l00155"></a>00155                         <span class="keyword">public</span>:
<a name="l00159"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a39f760a76182a7d7edd9135e1dcaa2b8">00159</a>                                 u16                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a39f760a76182a7d7edd9135e1dcaa2b8">flags</a>()<span class="keyword"> const                                                                   </span>{ <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a6b0f3f9f5c86077db5122d205fe0c583" title="Misc flags.">_flags</a>; }
<a name="l00160"></a>00160 
<a name="l00164"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a8e242de70643894573bd8157849cde8a">00164</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a8e242de70643894573bd8157849cde8a">flags</a>(u16 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a39f760a76182a7d7edd9135e1dcaa2b8">flags</a>)                                                                { <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a6b0f3f9f5c86077db5122d205fe0c583" title="Misc flags.">_flags</a> = <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a8e242de70643894573bd8157849cde8a">flags</a>; }
<a name="l00165"></a>00165 
<a name="l00170"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ac0a2ce846920c85c265242572b0caf13">00170</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ac0a2ce846920c85c265242572b0caf13">flags_set</a>(u16 mask)                                                             { <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a6b0f3f9f5c86077db5122d205fe0c583" title="Misc flags.">_flags</a> |= mask; }
<a name="l00171"></a>00171 
<a name="l00176"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a19618746d2244e7a40f3c0bae182b1cd">00176</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a19618746d2244e7a40f3c0bae182b1cd">flags_clear</a>(u16 mask)                                                   { <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a6b0f3f9f5c86077db5122d205fe0c583" title="Misc flags.">_flags</a> &amp;= ~mask; }
<a name="l00177"></a>00177 
<a name="l00183"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a5110de47da929a94108d595b515dc1a2">00183</a>                                 <span class="keywordtype">bool</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a5110de47da929a94108d595b515dc1a2">flags_test</a>(u16 mask)                                                    { <span class="keywordflow">return</span> (<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a6b0f3f9f5c86077db5122d205fe0c583" title="Misc flags.">_flags</a> &amp; mask) != 0; }
<a name="l00184"></a>00184 
<a name="l00186"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a636243ab18f63e9be43a74282f539fb1">00186</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a636243ab18f63e9be43a74282f539fb1">tag</a>(u16 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3468ade79bdb2d0fe922390d38da1f88">tag</a>)                                                                    { <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a08e51a375ba5d102ce34b9dff35b0e40" title="A tag. Used for tracking purposes.">_tag</a> = <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a636243ab18f63e9be43a74282f539fb1">tag</a>; }
<a name="l00187"></a>00187 
<a name="l00189"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3468ade79bdb2d0fe922390d38da1f88">00189</a>                                 u16                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3468ade79bdb2d0fe922390d38da1f88">tag</a>()<span class="keyword"> const                                                                             </span>{ <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a08e51a375ba5d102ce34b9dff35b0e40" title="A tag. Used for tracking purposes.">_tag</a>; }
<a name="l00190"></a>00190 
<a name="l00195"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9d2693c36491366a148f4d2271782f2a">00195</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9d2693c36491366a148f4d2271782f2a">context</a>(u32 ctx)                                                                { <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996" title="Pointer to the shared area.">_shared</a>-&gt;<a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a5eb70b34a8c4ed13091f10e0b08eca39" title="Context. Owned by exclusive head owner.">context</a> = ctx; }
<a name="l00196"></a>00196 
<a name="l00201"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a124fe366986850a088dea27147b8dde7">00201</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a124fe366986850a088dea27147b8dde7">context</a>()<span class="keyword"> const                                                                 </span>{ <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996" title="Pointer to the shared area.">_shared</a>-&gt;<a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a5eb70b34a8c4ed13091f10e0b08eca39" title="Context. Owned by exclusive head owner.">context</a>; }
<a name="l00202"></a>00202 
<a name="l00208"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9a3a20437469823686aab7bd01758c93">00208</a>                                 u64                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9a3a20437469823686aab7bd01758c93">timestamp</a>()<span class="keyword"> const                                                               </span>{ <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996" title="Pointer to the shared area.">_shared</a>-&gt;<a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a0f1af74718fa836b2e2f4e96bd80aa97" title="Timestamp.">timestamp</a>; }
<a name="l00209"></a>00209 
<a name="l00215"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a197de743c7c38c308e1e35f45cc6a769">00215</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a197de743c7c38c308e1e35f45cc6a769">timestamp</a>(u64 ts)                                                               { <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996" title="Pointer to the shared area.">_shared</a>-&gt;<a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a0f1af74718fa836b2e2f4e96bd80aa97" title="Timestamp.">timestamp</a> = ts; }
<a name="l00216"></a>00216 
<a name="l00220"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9f46da0e071df2b25f7dfe4c593f9370">00220</a>                                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a>*                   <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9f46da0e071df2b25f7dfe4c593f9370">next</a>()                                                                                  { <span class="keywordflow">return</span> (<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *) <a class="code" href="classxcore_1_1dlist_1_1node.html#a7168f4c58221528421070c0d248f7d4a">_next</a>; }
<a name="l00221"></a>00221 
<a name="l00226"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa3c9009ebea801ce4b807cb45d74fd01">00226</a>                                 u8*                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa3c9009ebea801ce4b807cb45d74fd01">data</a>()<span class="keyword"> const                                                                    </span>{ <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a28382e32c10d3899d143c79249937986" title="Pointer to the memory buffer.">_buf</a> + <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa0754ec72b169bc56ca0266159883a65" title="Data offset.">_data</a>; }
<a name="l00227"></a>00227 
<a name="l00232"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">00232</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>()<span class="keyword"> const                                                                             </span>{ <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a>; }
<a name="l00233"></a>00233 
<a name="l00238"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aaa499416d0adcef7c83f53d71ae3240e">00238</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aaa499416d0adcef7c83f53d71ae3240e">size</a>()<span class="keyword"> const                                                                    </span>{ <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3e07ac778022642c1b89f07c924553c0" title="Size of the buffer.">_size</a>; }
<a name="l00239"></a>00239 
<a name="l00244"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a200ed711a55e97d366948c524baac8cb">00244</a>                                 u8*                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a200ed711a55e97d366948c524baac8cb">tail</a>()<span class="keyword"> const                                                                    </span>{ <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa3c9009ebea801ce4b807cb45d74fd01">data</a>() + <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a>; }
<a name="l00245"></a>00245 
<a name="l00249"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9e4edcfe52273c023d6d3446487c1e1b">00249</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9e4edcfe52273c023d6d3446487c1e1b">free</a>()
<a name="l00250"></a>00250                                 {
<a name="l00251"></a>00251                                         <span class="keywordflow">if</span> (<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae00a7f0365b447eb90864f070e7d264a" title="The number of references to this object.">_refcnt</a>.<a class="code" href="classxcore_1_1atomic_1_1atom__int__type.html#a0a6e3646d7d09069248453e1cd0726cc">decr_test</a>())
<a name="l00252"></a>00252                                                 <span class="keywordflow">return</span>;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254                                         <span class="keywordflow">if</span> (!<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996" title="Pointer to the shared area.">_shared</a>-&gt;<a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a31a729b09301ebf3221137e87c09455d" title="Data refcount. Used for cloning.">refcnt</a>.<a class="code" href="classxcore_1_1atomic_1_1atom__int__type.html#a0a6e3646d7d09069248453e1cd0726cc">decr_test</a>())
<a name="l00255"></a>00255                                                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a14c8d7afe182a4707686ba670367db1a" title="Allocator used in creating this object and to be used when cloning and copying this object...">_allocator</a>-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a13fc50ef4e4ddcaf091bcfa2e80373b4">deallocate_data</a>(<span class="keyword">this</span>);
<a name="l00256"></a>00256 
<a name="l00257"></a>00257                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a14c8d7afe182a4707686ba670367db1a" title="Allocator used in creating this object and to be used when cloning and copying this object...">_allocator</a>-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a73103074b941e63c2b64f89c423dabce">deallocate_head</a>(<span class="keyword">this</span>);
<a name="l00258"></a>00258                                 }
<a name="l00259"></a>00259 
<a name="l00264"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a8bff166aaea3c9a1181eae8abb577c22">00264</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a8bff166aaea3c9a1181eae8abb577c22">free_chain</a>()
<a name="l00265"></a>00265                                 {
<a name="l00266"></a>00266                                         <span class="keywordflow">if</span> (<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae00a7f0365b447eb90864f070e7d264a" title="The number of references to this object.">_refcnt</a>.<a class="code" href="classxcore_1_1atomic_1_1atom__int__type.html#a0a6e3646d7d09069248453e1cd0726cc">decr_test</a>())
<a name="l00267"></a>00267                                                 <span class="keywordflow">return</span>;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *m = this-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9f46da0e071df2b25f7dfe4c593f9370">next</a>();
<a name="l00270"></a>00270                                         <span class="keywordflow">if</span> (!<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996" title="Pointer to the shared area.">_shared</a>-&gt;<a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a31a729b09301ebf3221137e87c09455d" title="Data refcount. Used for cloning.">refcnt</a>.<a class="code" href="classxcore_1_1atomic_1_1atom__int__type.html#a0a6e3646d7d09069248453e1cd0726cc">decr_test</a>())
<a name="l00271"></a>00271                                                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a14c8d7afe182a4707686ba670367db1a" title="Allocator used in creating this object and to be used when cloning and copying this object...">_allocator</a>-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a13fc50ef4e4ddcaf091bcfa2e80373b4">deallocate_data</a>(<span class="keyword">this</span>);
<a name="l00272"></a>00272                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a14c8d7afe182a4707686ba670367db1a" title="Allocator used in creating this object and to be used when cloning and copying this object...">_allocator</a>-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a73103074b941e63c2b64f89c423dabce">deallocate_head</a>(<span class="keyword">this</span>);
<a name="l00273"></a>00273 
<a name="l00274"></a>00274                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *n = m;
<a name="l00275"></a>00275                                         <span class="keywordflow">while</span> (n!=0)
<a name="l00276"></a>00276                                         {
<a name="l00277"></a>00277                                                 m = n-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9f46da0e071df2b25f7dfe4c593f9370">next</a>();
<a name="l00278"></a>00278                                                 n-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a9e4edcfe52273c023d6d3446487c1e1b">free</a>();
<a name="l00279"></a>00279                                                 n = m;
<a name="l00280"></a>00280                                         }
<a name="l00281"></a>00281                                 }
<a name="l00282"></a>00282 
<a name="l00286"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae45a6715cc4f164d90cc11d13e714e46">00286</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae45a6715cc4f164d90cc11d13e714e46">hold</a>()
<a name="l00287"></a>00287                                 {
<a name="l00288"></a>00288                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae00a7f0365b447eb90864f070e7d264a" title="The number of references to this object.">_refcnt</a>.<a class="code" href="classxcore_1_1atomic_1_1atom__int__type.html#a0421730167a87249974e827d67220f57">incr</a>();
<a name="l00289"></a>00289                                 }
<a name="l00290"></a>00290 
<a name="l00296"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3ac2868c59978eb3fa84782b8edd31c7">00296</a>                                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a>*                   <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3ac2868c59978eb3fa84782b8edd31c7">clone</a>()
<a name="l00297"></a>00297                                 {
<a name="l00298"></a>00298                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *mb = <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a14c8d7afe182a4707686ba670367db1a" title="Allocator used in creating this object and to be used when cloning and copying this object...">_allocator</a>-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1allocator.html#a841df53c59ff9662f76c71952e8aa2b6">allocate_head</a>();
<a name="l00299"></a>00299                                         <span class="keywordflow">if</span> (likely(mb != 0))
<a name="l00300"></a>00300                                         {
<a name="l00301"></a>00301                                                 x_memcpy(mb, <span class="keyword">this</span>, <span class="keyword">sizeof</span>(*<span class="keyword">this</span>));
<a name="l00302"></a>00302                                                 mb-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae00a7f0365b447eb90864f070e7d264a" title="The number of references to this object.">_refcnt</a>.<a class="code" href="classxcore_1_1atomic_1_1atom__int__type.html#a30d4f7180ac818739926d297b06eb660">set</a>(1);
<a name="l00303"></a>00303                                                 mb-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996" title="Pointer to the shared area.">_shared</a>-&gt;<a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a31a729b09301ebf3221137e87c09455d" title="Data refcount. Used for cloning.">refcnt</a>.<a class="code" href="classxcore_1_1atomic_1_1atom__int__type.html#a0421730167a87249974e827d67220f57">incr</a>();
<a name="l00304"></a>00304                                         }
<a name="l00305"></a>00305                                         <span class="keywordflow">return</span> mb;
<a name="l00306"></a>00306                                 }
<a name="l00307"></a>00307 
<a name="l00316"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aaa26fb54fde227ca7f7c4db0355feec8">00316</a>                                 <span class="keywordtype">bool</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aaa26fb54fde227ca7f7c4db0355feec8">cloned</a>()<span class="keyword"> const </span>
<a name="l00317"></a>00317 <span class="keyword">                                </span>{ 
<a name="l00318"></a>00318                                         u32 c = <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996" title="Pointer to the shared area.">_shared</a>-&gt;<a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a31a729b09301ebf3221137e87c09455d" title="Data refcount. Used for cloning.">refcnt</a>.<a class="code" href="classxcore_1_1atomic_1_1atom__int__type.html#a24b2cf6ea2f3696c90e2b33c2fb321f3">get</a>();
<a name="l00319"></a>00319                                         <span class="keywordflow">return</span> (c - 1) != 0;
<a name="l00320"></a>00320                                 }
<a name="l00321"></a>00321 
<a name="l00325"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a620f5663622064431126e1e83b0bb6c7">00325</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a620f5663622064431126e1e83b0bb6c7">nusers</a>()<span class="keyword"> const                                                                  </span>{ <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ae00a7f0365b447eb90864f070e7d264a" title="The number of references to this object.">_refcnt</a>.<a class="code" href="classxcore_1_1atomic_1_1atom__int__type.html#a24b2cf6ea2f3696c90e2b33c2fb321f3">get</a>(); }
<a name="l00326"></a>00326 
<a name="l00330"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a7235e9eec50cabe8a0aa62cbda02159c">00330</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a7235e9eec50cabe8a0aa62cbda02159c">nclones</a>()<span class="keyword"> const                                                                 </span>{ <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a115824c95d37426bccfdb4bea04eb996" title="Pointer to the shared area.">_shared</a>-&gt;<a class="code" href="structxcore_1_1atomic_1_1mbuf_1_1shared.html#a31a729b09301ebf3221137e87c09455d" title="Data refcount. Used for cloning.">refcnt</a>.<a class="code" href="classxcore_1_1atomic_1_1atom__int__type.html#a24b2cf6ea2f3696c90e2b33c2fb321f3">get</a>(); }
<a name="l00331"></a>00331 
<a name="l00335"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a11e28a2afa92ba91ea32747f6b814873">00335</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a11e28a2afa92ba91ea32747f6b814873">reset</a>()
<a name="l00336"></a>00336                                 {
<a name="l00337"></a>00337                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a>  = 0;
<a name="l00338"></a>00338                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa0754ec72b169bc56ca0266159883a65" title="Data offset.">_data</a> = 0;
<a name="l00339"></a>00339                                 }
<a name="l00340"></a>00340 
<a name="l00346"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a0f7e44e8fc7766497171c70c596fb9e3">00346</a>                                 u8*                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a0f7e44e8fc7766497171c70c596fb9e3">put</a>(u32 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>)
<a name="l00347"></a>00347                                 {
<a name="l00348"></a>00348                                         <span class="keywordflow">if</span> ((<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a> + len) &gt; <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3e07ac778022642c1b89f07c924553c0" title="Size of the buffer.">_size</a>)
<a name="l00349"></a>00349                                                 <span class="keywordflow">return</span> 0;
<a name="l00350"></a>00350 
<a name="l00351"></a>00351                                         u8 *<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa3c9009ebea801ce4b807cb45d74fd01">data</a> = <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a200ed711a55e97d366948c524baac8cb">tail</a>();
<a name="l00352"></a>00352                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a> += <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>;
<a name="l00353"></a>00353                                         <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa3c9009ebea801ce4b807cb45d74fd01">data</a>;
<a name="l00354"></a>00354                                 }
<a name="l00355"></a>00355 
<a name="l00363"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#afc6f62339a81350cb620856018ee934c">00363</a>                                 <span class="keywordtype">bool</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a0f7e44e8fc7766497171c70c596fb9e3">put</a>(<span class="keywordtype">void</span> *<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa3c9009ebea801ce4b807cb45d74fd01">data</a>, u32 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>)
<a name="l00364"></a>00364                                 {
<a name="l00365"></a>00365                                         u8 *p = <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a0f7e44e8fc7766497171c70c596fb9e3">put</a>(len);
<a name="l00366"></a>00366                                         <span class="keywordflow">if</span> (unlikely(p == 0))
<a name="l00367"></a>00367                                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00368"></a>00368                                         x_memcpy(p, data, len);
<a name="l00369"></a>00369                                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00370"></a>00370                                 }
<a name="l00371"></a>00371 
<a name="l00380"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a30b08007dbf7acb35bc733e7af115bc0">00380</a>                                 <span class="keywordtype">bool</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a0f7e44e8fc7766497171c70c596fb9e3">put</a>(<span class="keyword">const</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> *m)
<a name="l00381"></a>00381                                 {     
<a name="l00382"></a>00382                                         u8 *p = <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a0f7e44e8fc7766497171c70c596fb9e3">put</a>(m-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>());
<a name="l00383"></a>00383                                         <span class="keywordflow">if</span> (unlikely(p == 0))
<a name="l00384"></a>00384                                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00385"></a>00385 
<a name="l00386"></a>00386                                         x_memcpy(p, m-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa3c9009ebea801ce4b807cb45d74fd01">data</a>(), m-&gt;<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>());
<a name="l00387"></a>00387                                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00388"></a>00388                                 }
<a name="l00389"></a>00389 
<a name="l00394"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a043f9362a7a667f60d75492de6375b10">00394</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a043f9362a7a667f60d75492de6375b10">reserve</a>(u32 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>)
<a name="l00395"></a>00395                                 {
<a name="l00396"></a>00396                                         ASSERT((<a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a> + len) &lt; <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3e07ac778022642c1b89f07c924553c0" title="Size of the buffer.">_size</a>);
<a name="l00397"></a>00397                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa0754ec72b169bc56ca0266159883a65" title="Data offset.">_data</a> += <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>;
<a name="l00398"></a>00398                                 }
<a name="l00399"></a>00399 
<a name="l00404"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a314b9fdf5597cb44fd07199a42e2c033">00404</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a314b9fdf5597cb44fd07199a42e2c033">headroom</a>()<span class="keyword"> const</span>
<a name="l00405"></a>00405 <span class="keyword">                                </span>{
<a name="l00406"></a>00406                                         <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa0754ec72b169bc56ca0266159883a65" title="Data offset.">_data</a>;
<a name="l00407"></a>00407                                 }
<a name="l00408"></a>00408 
<a name="l00413"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ad531d2f154d2d4a20f20026b59d03b75">00413</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ad531d2f154d2d4a20f20026b59d03b75">tailroom</a>()<span class="keyword"> const</span>
<a name="l00414"></a>00414 <span class="keyword">                                </span>{
<a name="l00415"></a>00415                                         <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a3e07ac778022642c1b89f07c924553c0" title="Size of the buffer.">_size</a> - <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa0754ec72b169bc56ca0266159883a65" title="Data offset.">_data</a> - <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a>;
<a name="l00416"></a>00416                                 }
<a name="l00417"></a>00417 
<a name="l00422"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a03994de17e404a04da7e663e12278cdb">00422</a>                                 u32                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a03994de17e404a04da7e663e12278cdb">room</a>()<span class="keyword"> const</span>
<a name="l00423"></a>00423 <span class="keyword">                                </span>{
<a name="l00424"></a>00424                                         <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ad531d2f154d2d4a20f20026b59d03b75">tailroom</a>();
<a name="l00425"></a>00425                                 }
<a name="l00426"></a>00426 
<a name="l00434"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a18be50c318b7a4ad45bd24c47ccff935">00434</a>                                 u8*                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a18be50c318b7a4ad45bd24c47ccff935">push</a>(u32 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>)
<a name="l00435"></a>00435                                 {
<a name="l00436"></a>00436                                         <span class="keywordflow">if</span> (len &gt; <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa0754ec72b169bc56ca0266159883a65" title="Data offset.">_data</a>)
<a name="l00437"></a>00437                                                 <span class="keywordflow">return</span> 0;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa0754ec72b169bc56ca0266159883a65" title="Data offset.">_data</a> -= <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>;
<a name="l00440"></a>00440                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a>  += <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>;
<a name="l00441"></a>00441                                         <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa3c9009ebea801ce4b807cb45d74fd01">data</a>();
<a name="l00442"></a>00442                                 }
<a name="l00443"></a>00443 
<a name="l00450"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a73511838e13eb58f958a7c531c075777">00450</a>                                 u8*                             <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a73511838e13eb58f958a7c531c075777">pull</a>(u32 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>)
<a name="l00451"></a>00451                                 {
<a name="l00452"></a>00452                                         <span class="keywordflow">if</span> (len &gt; <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a>)
<a name="l00453"></a>00453                                                 <span class="keywordflow">return</span> 0;
<a name="l00454"></a>00454 
<a name="l00455"></a>00455                                         u8* <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a> = <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa3c9009ebea801ce4b807cb45d74fd01">data</a>();
<a name="l00456"></a>00456                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#aa0754ec72b169bc56ca0266159883a65" title="Data offset.">_data</a> += <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>;
<a name="l00457"></a>00457                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a>  -= <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>;
<a name="l00458"></a>00458                                         <span class="keywordflow">return</span> <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#ac5259606c04a6058aab0518f88b8b558">head</a>;
<a name="l00459"></a>00459                                 }
<a name="l00460"></a>00460 
<a name="l00470"></a>00470                                 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html">head</a>*                   <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a510360f33c7e6b696f83d49e69e48006">split</a>(u32 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>);
<a name="l00471"></a>00471 
<a name="l00476"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a43d1c39ce2d4a37fc3f29c146e334d15">00476</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a43d1c39ce2d4a37fc3f29c146e334d15">crop</a>(u32 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>)
<a name="l00477"></a>00477                                 {
<a name="l00478"></a>00478                                         ASSERT(len &lt;= <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a>);
<a name="l00479"></a>00479                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a> -= <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>;
<a name="l00480"></a>00480                                 }
<a name="l00481"></a>00481 
<a name="l00485"></a><a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a34ff4533556a9955ea08510716be7b11">00485</a>                                 <span class="keywordtype">void</span>                    <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a34ff4533556a9955ea08510716be7b11">resize</a>(u32 <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>)
<a name="l00486"></a>00486                                 {
<a name="l00487"></a>00487                                         ASSERT(len &lt;= <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a>);
<a name="l00488"></a>00488                                         <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#a1c8c0571eb9622635af65a8a82932e78" title="Data length.">_len</a> = <a class="code" href="classxcore_1_1atomic_1_1mbuf_1_1head.html#acc86c7bb527948d07f5af1b2330a6087">len</a>;
<a name="l00489"></a>00489                                 }
<a name="l00490"></a>00490                         };
<a name="l00491"></a>00491 
<a name="l00492"></a>00492                 } <span class="comment">// namespace mbuf</span>
<a name="l00493"></a>00493         } <span class="comment">// namespace atomic</span>
<a name="l00494"></a>00494 } <span class="comment">// namespace xcore</span>
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 <span class="preprocessor">#endif // __XMULTICORE_MBUF_H__</span>
</pre></div></div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Nov 9 2011 14:39:48 for xatomic by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
